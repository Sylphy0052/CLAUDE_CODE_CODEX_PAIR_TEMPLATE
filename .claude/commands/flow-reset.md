---
description: |
  [プロジェクトリセット] 現在のタスクリストと状態ファイルを、安全なバックアップを作成した上で削除します。
notes: |
  バージョン: 1.0
  状態管理: @state-manager
---
# Flow: プロジェクトリセットコマンド (flow-reset)

このコマンドは、現在の`flow`の進捗（`.flow/tasks.md`と`.flow/state.json`）を完全にリセットします。
誤操作を防ぐため、リセット実行前には必ずバックアップが作成され、ユーザーに最終確認を求めます。

## ⚠️ 警告 (Warning)

このコマンドは、現在の進捗を削除する**破壊的な操作**です。操作は慎重に行ってください。

## 使用例

    /flow-reset

---

## 実行フロー

### ステップ1: 事前チェック

まず、リセット対象の状態ファイルが存在するかを確認します。

- **もし、状態ファイルが存在しない場合:**
    処理を中断し、「情報: `flow`プロジェクトはまだ初期化されていません。リセットの必要はありません。」と報告してください。

### ステップ2: 安全なリセットの実行 (by @state-manager)

`@state-manager`エージェントを呼び出し、安全なリセットプロセスを実行させます。
このプロセスには、バックアップの作成とユーザーへの最終確認が含まれます。

@state-manager

- **Operation:** reset
- **Details:** 安全なバックアップを作成した後、ユーザーの承認を得てから状態をリセットしてください。

`@state-manager`は内部で以下の処理を行います。

1. 現在の状態ファイルのバックアップを`.flow/backup/`ディレクトリに作成します。
2. ユーザーに「バックアップを作成しました。本当にリセットしますか？ [Y/N]」と確認します。
3. ユーザーが承認した場合のみ、`.flow/`ディレクトリ内の`tasks.md`と`state.json`を削除します。

### ステップ3: 最終報告

`@state-manager`からの処理結果を受け取り、ユーザーに報告します。

- **もし、ユーザーがリセットを承認した場合:**
    「プロジェクトのリセットが完了しました。再度開始するには、`/flow-init`を実行してください。以前の状態はバックアップから復元可能です。」と報告します。
- **もし、ユーザーがリセットをキャンセルした場合:**
    「操作はキャンセルされました。プロジェクトの状態は変更されていません。」と報告します。
