---
description: |
  指定されたコードをCodexエージェントでレビューし、その結果をClaudeのレビューエージェントが再度レビューします。
argument_hint: "[レビュー対象のファイル/フォルダパス]"
notes: |
  バージョン: 1.0
  Codexレビュー担当: @codex-reviewer
  Claudeレビュー担当: @code-reviewer
---
# Codex & Claudeによる単発相互レビュー

このコマンドは、指定されたコードベースに対して、CodexとClaudeという異なる視点を持つAIがそれぞれレビューを行い、その結果を統合して多角的なフィードバックを提供するパイプラインです。

## 前提条件

- レビュー対象のファイルまたはフォルダパスを必ず指定してください。
- 各AIのレビュー結果と最終的な統合サマリーは、`.review/` ディレクトリ内にMarkdownファイルとして保存されます。

## 使用例

```bash
/review-with-codex src/main.py
/review-with-codex src/api/
```

---

## 実行フロー

### ステップ1: Codexによる一次レビュー (by @codex-reviewer)

**進捗報告:**
「ステップ1/3: `@codex-reviewer` によるレビューを開始します...」

@codex-reviewer

- **対象:** `$1`
- **レビュー結果の出力先:** `.review/${1//\//_}.codex.review.md`

レビュー完了後、結果をコンソールに出力し、指定されたファイルパスに保存してください。

**成功時報告:**
「`@codex-reviewer` のレビューが完了し、結果をファイルに保存しました。」

**エラー処理:**
もしレビューに失敗した場合は、「**`@codex-reviewer` のレビューが失敗しました。** 原因：<エラー詳細>」と報告し、以降の工程を中止してください。

### ステップ2: Claudeによる二次レビュー (by @code-reviewer)

**進捗報告:**
「ステップ2/3: `@code-reviewer` によるレビューを開始します...」

@code-reviewer

- **対象:** `$1`
- **レビュー結果の出力先:** `.review/${1//\//_}.claude.review.md`

レビュー完了後、結果をコンソールに出力し、指定されたファイルパスに保存してください。

**成功時報告:**
「`@code-reviewer` のレビューが完了し、結果をファイルに保存しました。」

**エラー処理:**
もしレビューに失敗した場合は、「**`@code-reviewer` のレビューが失敗しました。** 原因：<エラー詳細>」と報告し、以降の工程を中止してください。

### ステップ3: 総合評価とサマリーの生成

**進捗報告:**
「ステップ3/3: 両レビューの統合サマリーを作成します...」

ステップ1と2で生成された以下のレビューファイルを読み込みます。

- `@.review/${1//\//_}.codex.review.md`
- `@.review/${1//\//_}.claude.review.md`

上記2つのレビュー結果を比較・分析し、以下の内容を含む最終的な統合サマリーを作成してください。

1. **両者が共通して指摘している重要事項**
2. **各AIが独自に指摘したユニークな視点**
3. **両者の意見が対立している点（もしあれば）**
4. **開発者が次に取るべき、最も優先度の高いアクションプラン**

この統合サマリーを、`.review/${1//\//_}.summary.review.md` というファイルに保存してください。

**成功時報告:**
「全てのレビュープロセスが完了しました。最終サマリーは `.review/${1//\//_}.summary.review.md` をご確認ください。」
