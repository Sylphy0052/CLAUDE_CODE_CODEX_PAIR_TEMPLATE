---
description: "[カスタムSteering作成] 特定領域の専門知識ファイルを作成"
allowed-tools: Bash, Read, Write, Edit, Glob, Grep
---

# カスタムSteering作成

`.claude/steering/`ディレクトリに、標準3ファイル（product.md, tech.md, structure.md）を超えた特定領域の専門知識ファイルを作成します。

## 現在のSteering状態

### 既存Steeringファイル

既存のSteeringファイルを確認します：

```bash
ls -la .claude/steering/*.md 2>/dev/null || echo "Steeringディレクトリが見つかりません"
```

### プロジェクト分析

特定領域のディレクトリ構造を分析します：

```bash
# 特定領域の検出
find . -path ./node_modules -prune -o -path ./.git -prune -o -type d \( -name "test*" -o -name "spec*" -o -name "api" -o -name "auth" -o -name "security" \) -print 2>/dev/null

# 設定ファイルの検出
find . -path ./node_modules -prune -o \( -name "*.config.*" -o -name "*rc.*" -o -name ".*rc" \) -print 2>/dev/null
```

## タスク: カスタムSteeringドキュメントの作成

ユーザーの要件に基づいて新しいカスタムSteeringドキュメントを作成します。

### よくあるカスタムSteeringタイプ

1. **APIガイドライン** (`api-standards.md`)
   - REST/GraphQL規約
   - エラーハンドリングパターン
   - 認証・認可アプローチ
   - APIバージョニング戦略

2. **テストアプローチ** (`testing.md`)
   - テストファイル構成
   - テスト命名規則
   - モック戦略
   - カバレッジ要件
   - E2E vs ユニット vs 統合テスト

3. **コードスタイルガイドライン** (`code-style.md`)
   - 言語固有の規約
   - Linterを超えたフォーマットルール
   - コメント基準
   - 関数・変数の命名パターン
   - コード構成原則

4. **セキュリティポリシー** (`security.md`)
   - 入力検証要件
   - 認証パターン
   - シークレット管理
   - OWASP準拠ガイドライン
   - セキュリティレビューチェックリスト

5. **データベース規約** (`database.md`)
   - スキーマ設計パターン
   - マイグレーション戦略
   - クエリ最適化ガイドライン
   - コネクションプーリング設定
   - バックアップ・リカバリー手順

6. **パフォーマンス基準** (`performance.md`)
   - 読み込み時間要件
   - メモリ使用制限
   - 最適化技術
   - キャッシング戦略
   - モニタリング・プロファイリング

7. **デプロイメントワークフロー** (`deployment.md`)
   - CI/CDパイプライン段階
   - 環境設定
   - リリース手順
   - ロールバック戦略
   - ヘルスチェック要件

## Inclusion Mode（読み込みモード）の選択

このSteeringドキュメントをどのような頻度・文脈で参照すべきかに基づいてモードを選択します：

### 1. Always（常時読み込み） - カスタムファイルでは控えめに使用

- **使用タイミング**: すべてのコードに適用される普遍的な基準（セキュリティポリシー、コア規約）
- **影響**: すべてのインタラクションでコンテキストサイズが増加
- **例**: 重要なセキュリティ要件の`security-standards.md`
- **推奨**: 本当に普遍的なガイドラインにのみ使用

### 2. Conditional（条件付き読み込み） - ほとんどのカスタムファイルに推奨

- **使用タイミング**: 特定のファイルタイプやディレクトリに特化したガイドライン
- **ファイルパターン**: `"*.test.js"`, `"src/api/**/*"`, `"**/auth/*"`, `"*.config.*"`
- **例**: テストファイル編集時のみ読み込まれる`testing-approach.md`
- **利点**: 一般的なインタラクションを圧迫せずに関連する文脈を提供

### 3. Manual（手動読み込み） - 特殊な文脈に最適

- **使用タイミング**: 時折必要となる特殊な知識
- **使用方法**: 特定の会話中に`@filename.md`で参照
- **例**: デプロイメント特化タスクのための`deployment-runbook.md`
- **利点**: 必要な時に利用可能、日常的なインタラクションを圧迫しない

## ドキュメント構造ガイドライン

カスタムSteeringドキュメントには以下を含めます：

1. **明確なタイトルと目的**
   - このドキュメントがカバーするプロジェクトの側面
   - このガイダンスをいつ適用すべきか

2. **具体的なガイドライン**
   - 従うべき具体的なルールとパターン
   - 重要な決定の根拠

3. **コード例**
   - 正しい実装パターンを示す
   - 役立つ場合は反例も含める

4. **統合ポイント**
   - 他のSteeringドキュメントとの関係
   - 依存関係や前提条件

## セキュリティと品質ガイドライン

### セキュリティ要件

- **機密データを含めない**: APIキー、パスワード、データベースURL、シークレットは含めない
- **機密コンテキストのレビュー**: 内部サーバー名、プライベートAPIエンドポイントを避ける
- **チームアクセスの認識**: すべてのSteering内容はチームメンバーと共有される

### コンテンツ品質基準

- **単一責任**: 1つのSteeringファイル = 1つのドメイン（APIとデータベースのガイドラインを混在させない）
- **具体的な例**: コードスニペットと実際のプロジェクト例を含める
- **明確な根拠**: 特定のアプローチが好まれる理由を説明
- **保守可能なサイズ**: ファイルごとに2〜3分の読み取り時間を目標

## 実行手順

1. **ユーザーに確認**:
   - ドキュメント名（.mdで終わる説明的なファイル名）
   - カスタムSteeringのトピック・目的
   - Inclusion Modeの選択
   - 条件付き読み込みの場合の具体的なパターン

2. **ドキュメントを作成** `.claude/steering/`に以下を含める:
   - 明確で焦点を絞った内容（2〜3分で読める）
   - 実用的な例
   - 他のSteeringファイルとの一貫した書式

3. **Inclusion Modeをドキュメント化** ファイル先頭にコメントを追加:
   ```markdown
   <!-- Inclusion Mode: Always | Conditional: "pattern" | Manual -->
   ```

4. **検証**:
   - 既存のSteering内容と重複していないか
   - 指定された文脈に対して独自の価値を提供しているか
   - Markdownベストプラクティスに従っているか

## 注意事項

カスタムSteeringドキュメントは、基本3ファイルを補完するものであり、置き換えるものではありません。プロジェクトの特定の側面に対して特殊な文脈を提供します。

## 使用例

```bash
# カスタムSteering作成を開始
/steering-custom

# 対話形式で以下を回答:
# 1. ドキュメント名: testing-approach.md
# 2. 目的: テスト戦略とベストプラクティス
# 3. Inclusion Mode: Conditional
# 4. パターン: "*.test.py", "tests/**/*"
```
